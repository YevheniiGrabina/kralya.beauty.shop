{"mappings":"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","sources":["src/js/slider.js"],"sourcesContent":["\n\nlet slider = document.querySelector('.slider'),\n  sliderList = slider.querySelector('.slider-list'),\n  sliderTrack = slider.querySelector('.slider-track'),\n  slides = slider.querySelectorAll('.slide'),\n  arrows = slider.querySelector('.slider-arrows'),\n  prev = arrows.children[0],\n  next = arrows.children[1],\n  slideWidth = slides[0].offsetWidth,\n  slideIndex = 0,\n  posInit = 0,\n  posX1 = 0,\n  posX2 = 0,\n  posY1 = 0,\n  posY2 = 0,\n  posFinal = 0,\n  isSwipe = false,\n  isScroll = false,\n  allowSwipe = true,\n  transition = true,\n  nextTrf = 0,\n  prevTrf = 0,\n  lastTrf = --slides.length * slideWidth,\n  posThreshold = slides[0].offsetWidth * 0.35,\n  trfRegExp = /([-0-9.]+(?=px))/,\n  getEvent = function() {\n    return (event.type.search('touch') !== -1) ? event.touches[0] : event;\n  },\n  slide = function() {\n    if (transition) {\n      sliderTrack.style.transition = 'transform .5s';\n    }\n    sliderTrack.style.transform = `translate3d(-${slideIndex * slideWidth}px, 0px, 0px)`;\n\n    prev.classList.toggle('disabled', slideIndex === 0);\n    next.classList.toggle('disabled', slideIndex === --slides.length);\n  },\n  swipeStart = function() {\n    let evt = getEvent();\n\n    if (allowSwipe) {\n\n      transition = true;\n\n      nextTrf = (slideIndex + 1) * -slideWidth;\n      prevTrf = (slideIndex - 1) * -slideWidth;\n\n      posInit = posX1 = evt.clientX;\n      posY1 = evt.clientY;\n\n      sliderTrack.style.transition = '';\n\n      document.addEventListener('touchmove', swipeAction);\n      document.addEventListener('mousemove', swipeAction);\n      document.addEventListener('touchend', swipeEnd);\n      document.addEventListener('mouseup', swipeEnd);\n\n      sliderList.classList.remove('grab');\n      sliderList.classList.add('grabbing');\n    }\n  },\n  swipeAction = function() {\n\n    let evt = getEvent(),\n      style = sliderTrack.style.transform,\n      transform = +style.match(trfRegExp)[0];\n\n    posX2 = posX1 - evt.clientX;\n    posX1 = evt.clientX;\n\n    posY2 = posY1 - evt.clientY;\n    posY1 = evt.clientY;\n\n    // определение действия свайп или скролл\n    if (!isSwipe && !isScroll) {\n      let posY = Math.abs(posY2);\n      if (posY > 7 || posX2 === 0) {\n        isScroll = true;\n        allowSwipe = false;\n      } else if (posY < 7) {\n        isSwipe = true;\n      }\n    }\n\n    if (isSwipe) {\n      // запрет ухода влево на первом слайде\n      if (slideIndex === 0) {\n        if (posInit < posX1) {\n          setTransform(transform, 0);\n          return;\n        } else {\n          allowSwipe = true;\n        }\n      }\n\n      // запрет ухода вправо на последнем слайде\n      if (slideIndex === --slides.length) {\n        if (posInit > posX1) {\n          setTransform(transform, lastTrf);\n          return;\n        } else {\n          allowSwipe = true;\n        }\n      }\n\n      // запрет протаскивания дальше одного слайда\n      if (posInit > posX1 && transform < nextTrf || posInit < posX1 && transform > prevTrf) {\n        reachEdge();\n        return;\n      }\n\n      // двигаем слайд\n      sliderTrack.style.transform = `translate3d(${transform - posX2}px, 0px, 0px)`;\n    }\n\n  },\n  swipeEnd = function() {\n    posFinal = posInit - posX1;\n\n    isScroll = false;\n    isSwipe = false;\n\n    document.removeEventListener('touchmove', swipeAction);\n    document.removeEventListener('mousemove', swipeAction);\n    document.removeEventListener('touchend', swipeEnd);\n    document.removeEventListener('mouseup', swipeEnd);\n\n    sliderList.classList.add('grab');\n    sliderList.classList.remove('grabbing');\n\n    if (allowSwipe) {\n      if (Math.abs(posFinal) > posThreshold) {\n        if (posInit < posX1) {\n          slideIndex--;\n        } else if (posInit > posX1) {\n          slideIndex++;\n        }\n      }\n\n      if (posInit !== posX1) {\n        allowSwipe = false;\n        slide();\n      } else {\n        allowSwipe = true;\n      }\n\n    } else {\n      allowSwipe = true;\n    }\n\n  },\n  setTransform = function(transform, comapreTransform) {\n    if (transform >= comapreTransform) {\n      if (transform > comapreTransform) {\n        sliderTrack.style.transform = `translate3d(${comapreTransform}px, 0px, 0px)`;\n      }\n    }\n    allowSwipe = false;\n  },\n  reachEdge = function() {\n    transition = false;\n    swipeEnd();\n    allowSwipe = true;\n  };\n\nsliderTrack.style.transform = 'translate3d(0px, 0px, 0px)';\nsliderList.classList.add('grab');\n\nsliderTrack.addEventListener('transitionend', () => allowSwipe = true);\nslider.addEventListener('touchstart', swipeStart);\nslider.addEventListener('mousedown', swipeStart);\n\narrows.addEventListener('click', function() {\n  let target = event.target;\n\n  if (target.classList.contains('next')) {\n    slideIndex++;\n  } else if (target.classList.contains('prev')) {\n    slideIndex--;\n  } else {\n    return;\n  }\n\n  slide();\n});"],"names":["$57170e076db1eb28$var$slider","document","querySelector","$57170e076db1eb28$var$sliderList","$57170e076db1eb28$var$sliderTrack","$57170e076db1eb28$var$slides","querySelectorAll","$57170e076db1eb28$var$arrows","$57170e076db1eb28$var$prev","children","$57170e076db1eb28$var$next","$57170e076db1eb28$var$slideWidth","offsetWidth","$57170e076db1eb28$var$slideIndex","$57170e076db1eb28$var$posInit","$57170e076db1eb28$var$posX1","$57170e076db1eb28$var$posX2","$57170e076db1eb28$var$posY1","$57170e076db1eb28$var$posY2","$57170e076db1eb28$var$posFinal","$57170e076db1eb28$var$isSwipe","$57170e076db1eb28$var$isScroll","$57170e076db1eb28$var$allowSwipe","$57170e076db1eb28$var$transition","$57170e076db1eb28$var$nextTrf","$57170e076db1eb28$var$prevTrf","$57170e076db1eb28$var$lastTrf","length","$57170e076db1eb28$var$posThreshold","$57170e076db1eb28$var$trfRegExp","$57170e076db1eb28$var$getEvent","event","type","search","touches","$57170e076db1eb28$var$slide","style","transition","transform","classList","toggle","$57170e076db1eb28$var$swipeStart","evt","clientX","clientY","addEventListener","$57170e076db1eb28$var$swipeAction","$57170e076db1eb28$var$swipeEnd","remove","add","match","posY","Math","abs","$57170e076db1eb28$var$setTransform","$57170e076db1eb28$var$reachEdge","removeEventListener","comapreTransform","target","contains"],"version":3,"file":"index.41d87bae.js.map"}