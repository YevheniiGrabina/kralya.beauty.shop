{"mappings":"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","sources":["src/js/modal.js"],"sourcesContent":["class GraphModal {\n\tconstructor(options) {\n\t\tlet defaultOptions = {\n\t\t\tisOpen: ()=>{},\n\t\t\tisClose: ()=>{},\n\t\t}\n\t\tthis.options = Object.assign(defaultOptions, options);\n\t\tthis.modal = document.querySelector('.modal');\n\t\tthis.speed = 300;\n\t\tthis.animation = false;\n\t\tthis.reOpen = false;\n\t\tthis.nextWindow = false;\n\t\tthis.modalContainer = false;\n\t\tthis.isOpened = false;\n\t\tthis.previousActiveElement = false;\n\t\tthis._focusElements = [\n\t\t\t\t'a[href]',\n\t\t\t\t'area[href]',\n\t\t\t\t'input:not([disabled]):not([type=\"hidden\"]):not([aria-hidden])',\n\t\t\t\t'select:not([disabled]):not([aria-hidden])',\n\t\t\t\t'textarea:not([disabled]):not([aria-hidden])',\n\t\t\t\t'button:not([disabled]):not([aria-hidden])',\n\t\t\t\t'iframe',\n\t\t\t\t'object',\n\t\t\t\t'embed',\n\t\t\t\t'[contenteditable]',\n\t\t\t\t'[tabindex]:not([tabindex^=\"-\"])'\n\t\t];\n\t\tthis.fixBlocks = document.querySelectorAll('.fix-block');\n\t\tthis.events();\n\t}\n\n\tevents() {\n\t\tdocument.addEventListener('click', function(e) {\n\t\t \tconst clickedElement = e.target.closest(`[data-graph-path]`);\n\t\t \tif (clickedElement) {\n\t\t\t\tlet target = clickedElement.dataset.graphPath;\n\t\t\t\tlet animation = clickedElement.dataset.graphAnimation;\n\t\t\t\tlet speed =  clickedElement.dataset.graphSpeed;\n\t\t\t\tthis.animation = animation ? animation : 'fade';\n\t\t\t\tthis.speed = speed ? parseInt(speed) : 300;\n\t\t\t\tthis.nextWindow = document.querySelector(`[data-graph-target=\"${target}\"]`); \n\t\t\t\tthis.open();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.target.closest('.modal__close')) {\n\t\t\t\tthis.close();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}.bind(this));\n\n\t\twindow.addEventListener('keydown', function(e) {\n\t\t\tif (e.keyCode == 27) {\n\t\t\t\tif (this.modalContainer.classList.contains('modal-open')) {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (e.which == 9 && this.isOpened) {\n\t\t\t\tthis.focusCatch(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}.bind(this));\n\n\t\tthis.modal.addEventListener('click', function(e) {\n\t\t\tif (!e.target.classList.contains('modal__container') && !e.target.closest('.modal__container') && this.isOpened) {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\topen(selector) {\n\t\tthis.previousActiveElement = document.activeElement;\n\n\t\tif (this.isOpened) {\n\t\t\tthis.reOpen = true;\n\t\t\tthis.close();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.modalContainer = this.nextWindow;\n\n\t\tif (selector) {\n\t\t\tthis.modalContainer = document.querySelector(`[data-graph-target=\"${selector}\"]`);\n\t\t}\n\n\t\tthis.modal.style.setProperty('--transition-time', `${this.speed / 1000}s`);\n\t\tthis.modal.classList.add('is-open');\n\t\tthis.disableScroll();\n\t\t\n\t\tthis.modalContainer.classList.add('modal-open');\n\t\tthis.modalContainer.classList.add(this.animation);\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tthis.options.isOpen(this);\n\t\t\tthis.modalContainer.classList.add('animate-open');\n\t\t\tthis.isOpened = true;\n\t\t\tthis.focusTrap();\n\t\t}, this.speed);\n\t}\n\t\n\tclose() {\n\t\tif (this.modalContainer) {\n\t\t\tthis.modalContainer.classList.remove('animate-open');\n\t\t\tthis.modalContainer.classList.remove(this.animation);\n\t\t\tthis.modal.classList.remove('is-open');\n\t\t\tthis.modalContainer.classList.remove('modal-open');\n\t\t\t\n\t\t\tthis.enableScroll();\n\t\t\tthis.options.isClose(this);\n\t\t\tthis.isOpened = false;\n\t\t\tthis.focusTrap();\n\n\t\t\tif (this.reOpen) {\n\t\t\t\tthis.reOpen = false;\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t}\n\t}\n\n\tfocusCatch(e) {\n\t\tconst nodes = this.modalContainer.querySelectorAll(this._focusElements);\n\t\tconst nodesArray = Array.prototype.slice.call(nodes);\n\t\tconst focusedItemIndex = nodesArray.indexOf(document.activeElement)\n\t\tif (e.shiftKey && focusedItemIndex === 0) {\n\t\t\tnodesArray[nodesArray.length - 1].focus();\n\t\t\te.preventDefault();\n\t\t}\n\t\tif (!e.shiftKey && focusedItemIndex === nodesArray.length - 1) {\n\t\t\tnodesArray[0].focus();\n\t\t\te.preventDefault();\n\t\t}\n\t}\n\n\tfocusTrap() {\n\t\tconst nodes = this.modalContainer.querySelectorAll(this._focusElements);\n\t\tif (this.isOpened) {\n\t\t\tif (nodes.length) nodes[0].focus();\n\t\t} else {\n\t\t\tthis.previousActiveElement.focus();\n\t\t}\n\t}\n\n\tdisableScroll() {\n\t\tlet pagePosition = window.scrollY;\n\t\tthis.lockPadding();\n\t\tdocument.body.classList.add('disable-scroll');\n\t\tdocument.body.dataset.position = pagePosition;\n\t\tdocument.body.style.top = -pagePosition + 'px';\n\t}\n\n\tenableScroll() {\n\t\tlet pagePosition = parseInt(document.body.dataset.position, 10);\n\t\tthis.unlockPadding();\n\t\tdocument.body.style.top = 'auto';\n\t\tdocument.body.classList.remove('disable-scroll');\n\t\twindow.scroll({\n\t\t\ttop: pagePosition,\n\t\t\tleft: 0\n\t\t});\n\t\tdocument.body.removeAttribute('data-position');\n\t}\n\n\tlockPadding() {\n\t\tlet paddingOffset = window.innerWidth - document.body.offsetWidth + 'px';\n\t\tthis.fixBlocks.forEach((el) => {\n\t\t\tel.style.paddingRight = paddingOffset;\n\t\t});\n\t\tdocument.body.style.paddingRight = paddingOffset;\n\t}\n\n\tunlockPadding() {\n\t\tthis.fixBlocks.forEach((el) => {\n\t\t\tel.style.paddingRight = '0px';\n\t\t});\n\t\tdocument.body.style.paddingRight = '0px';\n\t}\n}\n\n// new Modal().open('second');\n"],"names":["_classCallCheck","instance","Constructor","GraphModal","options","this","Object","assign","isOpen","isClose","modal","document","querySelector","speed","animation","reOpen","nextWindow","modalContainer","isOpened","previousActiveElement","_focusElements","fixBlocks","querySelectorAll","events","key","addEventListener","e","clickedElement","target","closest","dataset","graphPath","graphAnimation","graphSpeed","parseInt","concat","open","close","bind","window","keyCode","classList","contains","which","focusCatch","selector","activeElement","style","setProperty","add","disableScroll","setTimeout","_this","focusTrap","remove","enableScroll","nodes","nodesArray","Array","prototype","slice","call","focusedItemIndex","indexOf","shiftKey","length","focus","preventDefault","pagePosition","scrollY","lockPadding","body","position","top","unlockPadding","scroll","left","removeAttribute","paddingOffset","innerWidth","offsetWidth","forEach","el","paddingRight"],"version":3,"file":"index.7418a2e7.js.map"}