{"mappings":"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","sources":["src/js/cart.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\tconst productsBtn = document.querySelectorAll('.product__btn');\n\tconst cartProductsList = document.querySelector('.cart-content__list');\n\tconst cart = document.querySelector('.cart');\n\tconst cartQuantity = cart.querySelector('.cart__quantity');\n\tconst fullPrice = document.querySelector('.fullprice');\n\tconst orderModalOpenProd = document.querySelector('.order-modal__btn');\n\tconst orderModalList = document.querySelector('.order-modal__list');\n\tlet price = 0;\n\tlet randomId = 0;\n\tlet productArray = [];\n\n\tconst priceWithoutSpaces = (str) => {\n\t\treturn str.replace(/\\s/g, '');\n\t};\n\n\tconst normalPrice = (str) => {\n\t\treturn String(str).replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, 'грн');\n\t};\n\n\tconst plusFullPrice = (currentPrice) => {\n\t\treturn price += currentPrice;\n\t};\n\n\tconst minusFullPrice = (currentPrice) => {\n\t\treturn price -= currentPrice;\n\t};\n\n\tconst printQuantity = () => {\n\t\tlet productsListLength = cartProductsList.querySelector('.simplebar-content').children.length;\n\t\tcartQuantity.textContent = productsListLength;\n\t\tproductsListLength > 0 ? cart.classList.add('active') : cart.classList.remove('active');\n\t};\n\n\tconst printFullPrice = () => {\n\t\tfullPrice.textContent = `${normalPrice(price)} грн`;\n\t};\n\n\tconst generateCartProduct = (img, title, price, id) => {\n\t\treturn `\n\t\t\t<li class=\"cart-content__item\">\n\t\t\t\t<article class=\"cart-content__product cart-product\" data-id=\"${id}\">\n\t\t\t\t\t<img src=\"${img}\" alt=\"\" class=\"cart-product__img\">\n\t\t\t\t\t<div class=\"cart-product__text\">\n\t\t\t\t\t\t<h3 class=\"cart-product__title\">${title}</h3>\n\t\t\t\t\t\t<span class=\"cart-product__price\">${normalPrice(price)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class=\"cart-product__delete\" aria-label=\"Удалить товар\"></button>\n\t\t\t\t</article>\n\t\t\t</li>\n\t\t`;\n\t};\n\n\tconst deleteProducts = (productParent) => {\n\t\tlet id = productParent.querySelector('.cart-product').dataset.id;\n\t\tdocument.querySelector(`.product[data-id=\"${id}\"]`).querySelector('.product__btn').disabled = false;\n\t\t\n\t\tlet currentPrice = parseInt(priceWithoutSpaces(productParent.querySelector('.cart-product__price').textContent));\n\t\tminusFullPrice(currentPrice);\n\t\tprintFullPrice();\n\t\tproductParent.remove();\n\n\t\tprintQuantity();\n\n\t\tupdateStorage();\n\t};\n\n\tproductsBtn.forEach(el => {\n\t\t\n\t\tel.closest('.product').setAttribute('data-id', randomId++);\n\n\t\tel.addEventListener('click', (e) => {\n\t\t\tlet self = e.currentTarget;\n\t\t\tlet parent = self.closest('.product');\n\t\t\tlet id = parent.dataset.id;\n\t\t\tlet img = parent.querySelector('.image-switch__img img').getAttribute('src');\n\t\t\tlet title = parent.querySelector('.product__title').textContent;\n\t\t\tlet priceString = priceWithoutSpaces(parent.querySelector('.product-price__current').textContent);\n\t\t\tlet priceNumber = parseInt(priceWithoutSpaces(parent.querySelector('.product-price__current').textContent));\n\n\t\t\tplusFullPrice(priceNumber);\n\n\t\t\tprintFullPrice();\n\n\t\t\tcartProductsList.querySelector('.simplebar-content').insertAdjacentHTML('afterbegin', generateCartProduct(img, title, priceString, id));\n\t\t\tprintQuantity();\n\n\n\t\t\tupdateStorage();\n\t\t\t\n\t\t\tself.disabled = true;\n\t\t});\n\t});\n\n\tcartProductsList.addEventListener('click', (e) => {\n\t\tif (e.target.classList.contains('cart-product__delete')) {\n\t\t\tdeleteProducts(e.target.closest('.cart-content__item'));\n\t\t}\n\t});\n\n\tlet flag = 0;\n\torderModalOpenProd.addEventListener('click', (e) => {\n\t\tif (flag == 0) {\n\t\t\torderModalOpenProd.classList.add('open');\n\t\t\torderModalList.style.display = 'block';\n\t\t\tflag = 1;\n\t\t} else {\n\t\t\torderModalOpenProd.classList.remove('open');\n\t\t\torderModalList.style.display = 'none';\n\t\t\tflag = 0;\n\t\t}\n\t});\n\n\tconst generateModalProduct = (img, title, price, id) => {\n\t\treturn `\n\t\t\t<li class=\"order-modal__item\">\n\t\t\t\t<article class=\"order-modal__product order-product\" data-id=\"${id}\">\n\t\t\t\t\t<img src=\"${img}\" alt=\"\" class=\"order-product__img\">\n\t\t\t\t\t<div class=\"order-product__text\">\n\t\t\t\t\t\t<h3 class=\"order-product__title\">${title}</h3>\n\t\t\t\t\t\t<span class=\"order-product__price\">${normalPrice(price)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button class=\"order-product__delete\">Удалить</button>\n\t\t\t\t</article>\n\t\t\t</li>\n\t\t`;\n\t};\n\n\tconst modal = new GraphModal({\n\t\tisOpen: (modal) => {\n\t\t\tconsole.log('opened');\n\t\t\tlet array = cartProductsList.querySelector('.simplebar-content').children;\n\t\t\tlet fullprice = fullPrice.textContent;\n\t\t\tlet length = array.length;\n\n\t\t\tdocument.querySelector('.order-modal__quantity span').textContent = `${length} шт`;\n\t\t\tdocument.querySelector('.order-modal__summ span').textContent = `${fullprice}`;\n\t\t\tfor (item of array) {\n\t\t\t\tconsole.log(item)\n\t\t\t\tlet img = item.querySelector('.cart-product__img').getAttribute('src');\n\t\t\t\tlet title = item.querySelector('.cart-product__title').textContent;\n\t\t\t\tlet priceString = priceWithoutSpaces(item.querySelector('.cart-product__price').textContent);\n\t\t\t\tlet id = item.querySelector('.cart-product').dataset.id;\n\n\t\t\t\torderModalList.insertAdjacentHTML('afterbegin', generateModalProduct(img, title, priceString, id));\n\n\t\t\t\tlet obj = {};\n\t\t\t\tobj.title = title;\n\t\t\t\tobj.price = priceString;\n\t\t\t\tproductArray.push(obj);\n\t\t\t}\n\n\t\t\tconsole.log(productArray)\n\t\t},\n\t\tisClose: () => {\n\t\t\tconsole.log('closed');\n\t\t}\n\t});\n\n\tdocument.querySelector('.order').addEventListener('submit', (e) => {\n\t\te.preventDefault();\n\t\tlet self = e.currentTarget;\n\n\t\tlet formData = new FormData(self);\n\t\tlet name = self.querySelector('[name=\"Имя\"]').value;\n\t\tlet tel = self.querySelector('[name=\"Телефон\"]').value;\n\t\tlet mail = self.querySelector('[name=\"Email\"]').value;\n\t\tformData.append('Товары', JSON.stringify(productArray));\n\t\tformData.append('Имя', name);\n\t\tformData.append('Телефон', tel);\n\t\tformData.append('Email', mail);\n\n\t\tlet xhr = new XMLHttpRequest();\n\n\t\txhr.onreadystatechange = function() {\n\t\t\tif (xhr.readyState === 4) {\n\t\t\t\tif (xhr.status === 200) {\n\t\t\t\t\tconsole.log('Отправлено');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\txhr.open('POST', 'mail.php', true);\n\t\txhr.send(formData);\n\n\t\tself.reset();\n\t});\n\n\n\tconst countSumm = () => {\n\t\tdocument.querySelectorAll('.cart-content__item').forEach(el => {\n\t\t\tprice += parseInt(priceWithoutSpaces(el.querySelector('.cart-product__price').textContent));\n\t\t});\n\t};\n\n\tconst initialState = () => {\n\t\tif (localStorage.getItem('products') !== null) {\n\t\t\tcartProductsList.querySelector('.simplebar-content').innerHTML = localStorage.getItem('products');\n\t\t\tprintQuantity();\n\t\t\tcountSumm();\n\t\t\tprintFullPrice();\n\n\n\t\t\tdocument.querySelectorAll('.cart-content__product').forEach(el => {\n\t\t\t\tlet id = el.dataset.id;\n\t\t\t\tconsole.log(id)\n\t\t\t\tdocument.querySelector(`.product[data-id=\"${id}\"]`).querySelector('.product__btn').disabled = true;\n\t\t\t});\n\t\t}\n\t};\n\n\tinitialState();\n\n\tconst updateStorage = () => {\n\t\tlet parent = cartProductsList.querySelector('.simplebar-content');\n\t\tlet html = parent.innerHTML;\n\t\thtml = html.trim();\n\n\t\tif (html.length) {\n\t\t\tlocalStorage.setItem('products', html);\n\t\t} else {\n\t\t\tlocalStorage.removeItem('products');\n\t\t}\n\t};\n\n\tdocument.querySelector('.modal').addEventListener('click', (e) => {\n\t\tif (e.target.classList.contains('order-product__delete')) {\n\t\t\tlet id = e.target.closest('.order-modal__product').dataset.id;\n\t\t\tlet cartProduct = document.querySelector(`.cart-content__product[data-id=\"${id}\"]`).closest('.cart-content__item');\n\t\t\tdeleteProducts(cartProduct)\n\t\t\te.target.closest('.order-modal__product').remove();\n\t\t}\n\t});\n\n});"],"names":["document","addEventListener","productsBtn","querySelectorAll","cartProductsList","querySelector","cart","cartQuantity","fullPrice","orderModalOpenProd","orderModalList","price1","randomId","productArray","priceWithoutSpaces","str","replace","normalPrice","String","printQuantity","productsListLength","children","length","textContent","classList","add","remove","printFullPrice","concat","deleteProducts","productParent","id","dataset","disabled","currentPrice","minusFullPrice","parseInt","updateStorage","forEach","el","closest","setAttribute","e","self","currentTarget","parent","img","getAttribute","title","priceString","priceNumber","insertAdjacentHTML","price","generateCartProduct","target","contains","flag","style","display","generateModalProduct","GraphModal","isOpen","modal","console","log","array","fullprice","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","item","value","obj","push","err","return","isClose","preventDefault","formData","FormData","name","tel","mail","append","JSON","stringify","xhr","XMLHttpRequest","onreadystatechange","readyState","status","open","send","reset","localStorage","getItem","innerHTML","html","trim","setItem","removeItem","cartProduct"],"version":3,"file":"index.2375f42d.js.map"}